<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <!-- FONTS -->
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,700,600,800' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Oswald:300,400' rel='stylesheet' type='text/css'>

        <!-- THIRD PARTY STYLES -->
        <link href='libraries/leaflet/dist/leaflet.css' rel='stylesheet' type='text/css'>
        <link href='libraries/bootstrap/dist/css/bootstrap.min.css' rel='stylesheet' type='text/css'>

        <!-- STYLES -->
        <link href='css/main.css' rel='stylesheet' type='text/css'>
        <link href='css/colors.css' rel='stylesheet' type='text/css'>
        <link href='css/map.css' rel='stylesheet' type='text/css'>

        <title>Coffee Visualization - Javacadabra</title>

        <style>

            body {
              font: 10px sans-serif;
              color: white;
            }

            .axis path,
            .axis line {
              fill: none;
              stroke: #FFF;
              shape-rendering: crispEdges;
            }

            text {
                fill: white;
            }

            .x.axis path {
/*              display: none;*/
            }

            .line {
              fill: none;
              stroke: #f1c40f;
              stroke-width: 1.5px;
            }

        </style>
    </head>
    <body>
        <!-- External js libraries -->
        <script src="libraries/d3/d3.min.js"></script>
        <script src="libraries/topojson/topojson.js"></script>
        <script src="libraries/leaflet/dist/leaflet.js"></script>
        <script src="libraries/jquery/dist/jquery.min.js"></script>

        <div>
            <h1>Javacadabra</h1>
        </div>

        <!-- Our js files -->
        <script src="dist/preprocessing.js"></script>
        <script src="dist/chart.js"></script>
        <script src="dist/linechart.js"></script>
        <script>

            // Global config
//            var margin = {top: 30, right: 10, bottom: 20, left: 10},
//                width = 400 - margin.left - margin.right,
//                height = 275 - margin.top - margin.bottom,
//                radius = Math.min(width, height) / 2;
//
//            // Sunburst config
//            var x = d3.scale.linear().range([0, 2 * Math.PI]);
//            var y = d3.scale.sqrt().range([0, radius]);
//
//            var xAxis = d3.svg.axis().scale(x).orient("bottom");
//            var yAxis = d3.svg.axis().scale(y).orient("left");
//
//            var sunburst1 = d3.select("body").append("svg")
//                .attr("width", width + margin.left + margin.right)
//                .attr("height", height + margin.top + margin.bottom)
//                .append("g")
//                .attr("transform", "translate(" +
//                        (margin.left + width  / 2) + "," +
//                        (margin.top  + height / 2) + ")");
//
//            var sunburst2 = d3.select("body").append("svg")
//                .attr("width", width + margin.left + margin.right)
//                .attr("height", height + margin.top + margin.bottom)
//                .append("g")
//                .attr("transform", "translate(" +
//                        (margin.left + width  / 2) + "," +
//                        (margin.top  + height / 2) + ")");


//            function yearChange() {
//                var sliderValue = document.getElementById("yearRange").value;
//                var yearBeg = '19';
//                var yearEnd = '90';
//                var year2End = '91';
//                if (sliderValue < 9) {
//                    yearBeg = '19';
//                    yearEnd = '9' + sliderValue;
//                    year2End = '9' + (parseFloat(sliderValue) + 1);
//                } else if (sliderValue == 9) {
//                    yearBeg = '19';
//                    yearEnd = '99';
//                    year2End = '00';
//                } else if (sliderValue < 19) {
//                    yearBeg = 20;
//                    yearEnd = '0' + sliderValue % 10;
//                    year2End = '0' + (parseFloat(sliderValue % 10) + 1);
//                } else if (sliderValue == 19) {
//                    yearBeg = '20';
//                    yearEnd = '09';
//                    year2End = '10';
//                } else {
//                    yearBeg = '20';
//                    yearEnd = '1' + (parseFloat(sliderValue) % 10);
//                    year2End = '1' + (parseFloat(sliderValue) % 10 + 1);
//                }
//                year = yearBeg + yearEnd + '/' + year2End;
//                document.getElementById('slideValue').innerHTML = year;
//                d3.csv("data/total_production.csv", type, render1);
//                d3.csv("data/domestic_consumption.csv", type, render2);
//            }


            function render1(data) {
                data = data.filter(isGoodData);
//                renderSunburst(data, sunburst1, year);
            }
            function render2(data) {
                data = data.filter(isGoodData);
//                renderSunburst(data, sunburst2, year);
            }

            d3.csv("data/total_production.csv", type, render1);
            d3.csv("data/domestic_consumption.csv", type, render2);
        </script>
    </body>
</html>